<!DOCTYPE html>
<html lang="en" class="">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Vitra â€“ Herbal Medicine AI Hub</title>
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet"/>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* RESET & BASE */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Montserrat',sans-serif; }
    :root {
      /* DARK THEME VARIABLES */
      --accent: #8ECDF1;
      --bg1: #161B22;    /* page background */
      --bg2: #1E2126;    /* card/module background */
      --muted: rgba(224,224,224,0.6);
      --text: #E0E0E0;
      --radius: 8px;
    }
    /* LIGHT THEME OVERRIDES */
    :root.light {
      --bg1: #F4F4F4;
      --bg2: #FFFFFF;
      --muted: rgba(0,0,0,0.4);
      --text: #111111;
    }
    html, body {
      height: 100%;
      background: var(--bg1);
      color: var(--text);
      transition: background .3s, color .3s;
    }
    a { color: inherit; text-decoration: none; }
    button,input,select,textarea { font-family: inherit; }
    button { cursor:pointer; border:none; background:none; color:inherit; }
    .sr-only {
      position: absolute !important;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0,0,0,0);
      white-space: nowrap; border: 0;
    }

    /* SIDEBAR */
    #sidebar {
      width: 240px;
      background: var(--bg1);
      display: flex; flex-direction: column;
      transition: width .3s;
    }
    .brand { display:flex; align-items:center; gap:.75rem;
      padding:1.5rem; font-size:1.3rem; font-weight:700;
      color: var(--accent);
    }
    .nav-links { flex:1; }
    .nav-links a { display:flex; align-items:center; gap:1rem;
      padding:.9rem 1.2rem; transition: background .2s;
    }
    .nav-links a:hover, .nav-links a.active { background: var(--accent)20; }
    .nav-links i { width:24px; text-align:center; font-size:1.2rem; color:var(--accent); }
    .toggle-sidebar { padding:1rem; text-align:center; border-top:1px solid #29303A; cursor:pointer; }

    /* MAIN */
    #main { flex:1; display:flex; flex-direction:column; }
    header {
      display:flex; align-items:center; justify-content:space-between;
      padding:1rem 2rem;
      background: var(--bg1)CC; backdrop-filter: blur(6px);
      position: sticky; top:0; z-index:10;
    }
    .header-left { display:flex; align-items:center; gap:1rem; }
    #toggleSidebarBtn { font-size:1.4rem; cursor:pointer; }
    .greeting h1 { font-size:1.9rem; display:flex; align-items:center; gap:.5rem; }
    .greeting p { opacity:.75; }
    .header-right i { margin-left:1rem; font-size:1.4rem; cursor:pointer; transition: transform .2s; }
    .header-right i:hover { transform: scale(1.2); }
    .content { padding:1rem 2rem; overflow-y:auto; flex:1; }

    /* STAT CARDS */
    .stats {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(180px,1fr));
      gap:1.5rem; margin-bottom:1.5rem;
    }
    .stat-card {
      background: var(--bg2);
      border-radius: var(--radius);
      padding:1rem;
      display:flex; align-items:center; gap:1rem;
      transition: transform .2s, box-shadow .2s;
    }
    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }
    .stat-card i { font-size:1.8rem; color:var(--accent); }
    .stat-card .details h3 { font-size:1.1rem; margin-bottom:.3rem; }
    .stat-card .details p { opacity:.8; color:var(--accent); }

    /* MODULES */
    section.module {
      background: var(--bg2);
      border-radius: var(--radius);
      padding:1rem;
      margin-bottom:1.5rem;
      transition: box-shadow .2s;
    }
    section.module:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }
    section.module h2 {
      font-size:1.2rem;
      margin-bottom:.75rem;
      display:flex; align-items:center; gap:.5rem;
    }
    section.module form { display:flex; flex-direction:column; gap:.5rem; }
    section.module label { font-size:.9rem; }
    section.module input, section.module select, section.module textarea {
      width:100%;
      background: var(--bg1);
      border:1px solid #29303A;
      padding:.5rem;
      border-radius: var(--radius);
      color: inherit;
      transition: border-color .2s;
    }
    section.module input:focus, section.module select:focus, section.module textarea:focus {
      border-color: var(--accent);
      outline:none;
    }
    section.module button {
      background: var(--accent);
      color: var(--bg1);
      padding:.5rem 1rem;
      border-radius: var(--radius);
      transition: background .2s;
      align-self:flex-start;
    }
    section.module button:hover { background: var(--accent)CC; }
    .small { font-size:.9rem; color: var(--muted); margin-top:.5rem; }

    /* CHART */
    .chart-box {
      background: var(--bg2);
      border-radius: var(--radius);
      padding:1rem;
      margin-bottom:1.5rem;
    }
    .chart-box canvas { width:100%!important; height:180px!important; }
  </style>
</head>
<body>

  <!-- SIDEBAR -->
  <aside id="sidebar">
    <div class="brand"><i class="fas fa-medkit"></i>Vitra</div>
    <nav class="nav-links">
      <a href="dashboard.html"><i class="fas fa-tachometer-alt"></i>Dashboard</a>
      <a href="herbs.html" class="active"><i class="fas fa-seedling"></i>Herbal AI</a>
      <a href="mental.html"><i class="fas fa-brain"></i>Mental Health</a>
      <a href="diet.html"><i class="fas fa-utensils"></i>Diet</a>
      <a href="pharmacy.html"><i class="fas fa-pills"></i>E-Pharmacy</a>
      <a href="booking.html"><i class="fas fa-calendar-check"></i>Booking</a>
      <a href="settings.html"><i class="fas fa-cog"></i>Settings</a>
    </nav>
    <div class="toggle-sidebar"><i class="fas fa-arrow-circle-left"></i></div>
  </aside>

  <!-- MAIN -->
  <div id="main">
    <header>
      <div class="header-left">
        <i id="toggleSidebarBtn" class="fas fa-bars"></i>
        <div class="greeting">
          <h1><i class="fas fa-seedling"></i>Herbal AI Hub</h1>
          <p>Powerful AI features for herbal medicine</p>
        </div>
      </div>
      <div class="header-right">
        <i class="fas fa-bell"></i>
        <i class="fas fa-user-circle"></i>
        <i id="themeToggle" class="fas fa-moon" title="Toggle theme"></i>
      </div>
    </header>

    <div class="content">

      <!-- Stats -->
      <div class="stats">
        <div class="stat-card"><i class="fas fa-stethoscope"></i>
          <div class="details"><h3>Diagnostics</h3><p id="stat-dx">0</p></div>
        </div>
        <div class="stat-card"><i class="fas fa-user-shield"></i>
          <div class="details"><h3>Formulations</h3><p id="stat-form">0</p></div>
        </div>
        <div class="stat-card"><i class="fas fa-search"></i>
          <div class="details"><h3>ID Requests</h3><p id="stat-id">0</p></div>
        </div>
        <div class="stat-card"><i class="fas fa-chart-pie"></i>
          <div class="details"><h3>Efficacy</h3><p id="stat-pred">0</p></div>
        </div>
        <div class="stat-card"><i class="fas fa-calculator"></i>
          <div class="details"><h3>Dose Calculator</h3><p id="stat-dose">0</p></div>
        </div>
        <div class="stat-card"><i class="fas fa-exchange-alt"></i>
          <div class="details"><h3>Interactions</h3><p id="stat-int">0</p></div>
        </div>
      </div>

      <!-- 1. AI-Powered Diagnostic Tools -->
      <section class="module" aria-labelledby="dx-section">
        <h2 id="dx-section"><i class="fas fa-stethoscope"></i>AI Diagnostic Tool</h2>
        <form onsubmit="runDiagnostics(); return false;">
          <label class="sr-only" for="dxInput">Describe symptoms</label>
          <textarea id="dxInput" placeholder="Describe symptoms, history, lab results..." required></textarea>
          <button type="submit"><i class="fas fa-notes-medical"></i> Analyze</button>
        </form>
        <p id="dxResult" class="small">Enter patient info to get herbal suggestions.</p>
      </section>

      <!-- 2. Personalized Herbal Formulations -->
      <section class="module" aria-labelledby="pf-section">
        <h2 id="pf-section"><i class="fas fa-user-shield"></i>Personalized Formulation</h2>
        <form onsubmit="makePersonalized(); return false;">
          <label for="pfHerbs">Select Herbs</label>
          <select id="pfHerbs" multiple required>
            <option>Ginkgo Biloba</option><option>Turmeric</option><option>Valerian</option>
            <option>Ashwagandha</option><option>Echinacea</option>
          </select>
          <label for="pfAge">Age</label>
          <input type="number" id="pfAge" placeholder="Age" min="0" required>
          <label for="pfWeight">Weight (kg)</label>
          <input type="number" id="pfWeight" placeholder="Weight" min="0" required>
          <button type="submit"><i class="fas fa-cog"></i> Generate</button>
        </form>
        <p id="pfResult" class="small">Provide data to receive a custom formula.</p>
      </section>

      <!-- 3. AI-Driven Ingredient Identification -->
      <section class="module" aria-labelledby="ing-section">
        <h2 id="ing-section"><i class="fas fa-leaf"></i>Ingredient Identification</h2>
        <form onsubmit="identifyIngredient(); return false;">
          <label for="ingUpload" class="sr-only">Upload image of herb</label>
          <input type="file" id="ingUpload" accept="image/*" required>
          <button type="submit"><i class="fas fa-microscope"></i> Identify</button>
        </form>
        <p id="ingResult" class="small">Upload to verify species &amp; detect contaminants.</p>
      </section>

      <!-- 4. Predictive Analysis for Efficacy -->
      <section class="module" aria-labelledby="pred-section">
        <h2 id="pred-section"><i class="fas fa-chart-pie"></i>Predictive Efficacy</h2>
        <form onsubmit="runPrediction(); return false;">
          <label for="predInput">Herb & Condition</label>
          <input id="predInput" placeholder="e.g. Turmeric arthritis" required>
          <button type="submit"><i class="fas fa-brain"></i> Predict</button>
        </form>
        <p id="predResult" class="small">Enter herb &amp; condition to get score.</p>
      </section>

      <!-- 5. AI-Enhanced Education Chatbot -->
      <section class="module" aria-labelledby="chat-section">
        <h2 id="chat-section"><i class="fas fa-graduation-cap"></i>Education Chatbot</h2>
        <div id="chatBox" style="max-height:200px;overflow-y:auto;border:1px solid #29303A;padding:.5rem;border-radius:var(--radius);background:var(--bg1);"></div>
        <div style="display:flex;gap:.5rem;margin-top:.5rem;">
          <label for="chatInput" class="sr-only">Chat input</label>
          <input id="chatInput" placeholder="Ask about herbal medicine..." required>
          <button id="sendChat"><i class="fas fa-paper-plane"></i></button>
        </div>
      </section>

      <!-- Existing: AI Herb Identification -->
      <section class="module" aria-labelledby="herb-section">
        <h2 id="herb-section"><i class="fas fa-camera"></i>AI Herb Identification</h2>
        <form onsubmit="identifyHerb(); return false;">
          <label for="herbUpload" class="sr-only">Upload herb image</label>
          <input type="file" id="herbUpload" accept="image/*" required>
          <button type="submit"><i class="fas fa-search"></i> Identify</button>
        </form>
        <p id="identifyResult" class="small">Upload an image to identify the herb.</p>
      </section>

      <!-- Existing: Dosage Calculator -->
      <section class="module" aria-labelledby="dose-section">
        <h2 id="dose-section"><i class="fas fa-calculator"></i>Dosage Calculator</h2>
        <form onsubmit="calcDosage(); return false;">
          <label for="weight">Weight (kg)</label>
          <input type="number" id="weight" placeholder="Weight" min="0" required>
          <label for="symptom">Symptom</label>
          <input type="text" id="symptom" placeholder="e.g. headache" required>
          <button type="submit"><i class="fas fa-check"></i> Calculate</button>
        </form>
        <p id="dosageResult" class="small"></p>
      </section>

      <!-- Existing: Interaction Checker -->
      <section class="module" aria-labelledby="int-section">
        <h2 id="int-section"><i class="fas fa-exchange-alt"></i>Interaction Checker</h2>
        <form onsubmit="checkInteraction(); return false;">
          <label for="herbA">Herb A</label>
          <select id="herbA" required>
            <option>Ginkgo Biloba</option><option>Turmeric</option><option>St. Johnâ€™s Wort</option>
          </select>
          <label for="herbB">Herb B</label>
          <select id="herbB" required>
            <option>Ginkgo Biloba</option><option>Turmeric</option><option>St. Johnâ€™s Wort</option>
          </select>
          <button type="submit"><i class="fas fa-search"></i> Check</button>
        </form>
        <p id="interactionResult" class="small"></p>
      </section>

      <!-- Existing: Encyclopedia -->
      <section class="module" aria-labelledby="enc-section">
        <h2 id="enc-section"><i class="fas fa-book"></i>Herb Encyclopedia</h2>
        <label for="searchHerb" class="sr-only">Search herbs</label>
        <input id="searchHerb" placeholder="Search herbsâ€¦" />
        <table style="width:100%;margin-top:.5rem;">
          <thead><tr><th>Name</th><th>Use</th><th>Category</th></tr></thead>
          <tbody id="herbTable">
            <tr><td>Ginkgo Biloba</td><td>Memory</td><td>Leaf</td></tr>
            <tr><td>Turmeric</td><td>Inflammation</td><td>Root</td></tr>
            <tr><td>St. Johnâ€™s Wort</td><td>Mood</td><td>Flower</td></tr>
          </tbody>
        </table>
      </section>

      <!-- Trending Herbs Chart -->
      <div class="chart-box">
        <h4><i class="fas fa-chart-line"></i>Trending Herbs</h4>
        <canvas id="trendingChart"></canvas>
      </div>

    </div>
  </div>

  <script>
    // Persist & apply theme
    const themeBtn = document.getElementById('themeToggle');
    if (localStorage.getItem('theme') === 'light') document.documentElement.classList.add('light');
    themeBtn.onclick = () => {
      document.documentElement.classList.toggle('light');
      localStorage.setItem('theme', document.documentElement.classList.contains('light') ? 'light' : 'dark');
      themeBtn.classList.toggle('fa-sun');
    };

    // Sidebar toggle
    const sb = document.getElementById('sidebar'),
          tb = document.querySelector('.toggle-sidebar'),
          tbtn = document.getElementById('toggleSidebarBtn');
    [tb, tbtn].forEach(el => el.onclick = () => sb.classList.toggle('collapsed'));

    // Init stats
    ['dx','form','id','pred','dose','int'].forEach(k => {
      if (!localStorage.getItem(k)) localStorage.setItem(k, '0');
      document.getElementById(`stat-${k}`).textContent = localStorage.getItem(k);
    });

    // Helpers
    function bumpStat(key) {
      const c = +localStorage.getItem(key) + 1;
      localStorage.setItem(key, c);
      document.getElementById(`stat-${key}`).textContent = c;
    }

    // 1. Diagnostics
    function runDiagnostics() {
      bumpStat('dx');
      document.getElementById('dxResult').textContent = 'ðŸ·ï¸ Suggestion: Turmeric 500mg daily + Boswellia.';
    }

    // 2. Personalized Formulations
    function makePersonalized() {
      const herbs = [...document.getElementById('pfHerbs').selectedOptions].map(o => o.value);
      const age = document.getElementById('pfAge').value;
      const w = document.getElementById('pfWeight').value;
      bumpStat('form');
      document.getElementById('pfResult').textContent =
        `ðŸ§ª Custom formula for ${age}yr/${w}kg: ${herbs.join(', ')}.`;
    }

    // 3. Ingredient Identification
    function identifyIngredient() {
      bumpStat('id');
      document.getElementById('ingResult').textContent = 'âœ… Verified: Ginkgo Biloba (98% purity).';
    }

    // 4. Predictive Efficacy
    function runPrediction() {
      bumpStat('pred');
      document.getElementById('predResult').textContent = 'ðŸ“Š Efficacy: 87% predicted relief.';
    }

    // 5. Education Chatbot
    const chatBox = document.getElementById('chatBox');
    document.getElementById('sendChat').onclick = () => {
      const q = document.getElementById('chatInput').value.trim();
      if (!q) return;
      chatBox.innerHTML += `<p><strong>You:</strong> ${q}</p>`;
      document.getElementById('chatInput').value = '';
      setTimeout(() => {
        chatBox.innerHTML += `<p><strong>Vitra AI:</strong> Hereâ€™s an overview on ${q}â€¦</p>`;
        chatBox.scrollTop = chatBox.scrollHeight;
      }, 500);
    };

    // Existing: AI Herb Identification
    function identifyHerb() {
      bumpStat('id');
      document.getElementById('identifyResult').textContent = 'ðŸ·ï¸ Identified: Turmeric.';
    }

    // Dosage Calculator
    function calcDosage() {
      const w = +document.getElementById('weight').value;
      const d = (w * 0.5).toFixed(1);
      bumpStat('dose');
      document.getElementById('dosageResult').textContent = `Suggested: ${d} mg`;
    }

    // Interaction Checker
    function checkInteraction() {
      const a = document.getElementById('herbA').value,
            b = document.getElementById('herbB').value;
      bumpStat('int');
      const msg = a === b
        ? 'Same herb â€“ no interaction.'
        : `No known interaction between ${a} & ${b}.`;
      document.getElementById('interactionResult').textContent = msg;
    }

    // Herb search filter
    document.getElementById('searchHerb').oninput = e => {
      const q = e.target.value.toLowerCase();
      document.querySelectorAll('#herbTable tr').forEach(tr =>
        tr.style.display = tr.textContent.toLowerCase().includes(q) ? '' : 'none'
      );
    };

    // Lazy-load chart
    document.addEventListener('DOMContentLoaded', () => {
      const obs = new IntersectionObserver(entries => {
        if (entries[0].isIntersecting) {
          drawChart();
          obs.disconnect();
        }
      });
      obs.observe(document.getElementById('trendingChart'));
    });
    function drawChart() {
      new Chart(document.getElementById('trendingChart'), {
        type:'bar',
        data:{
          labels:['Turmeric','Ginkgo','Echinacea','Valerian','Ashwagandha'],
          datasets:[{data:[120,95,85,70,65],backgroundColor:'var(--accent)'}]
        },
        options:{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
      });
    }
  </script>
</body>
</html>
